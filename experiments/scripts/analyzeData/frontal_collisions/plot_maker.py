import numpy as np
import matplotlib.pyplot as plt
import matplotlib
x = np.arange(2,75,3)

font = {'family' : 'normal',
        'weight' : 'bold',
        'size'   : 22}

matplotlib.rc('font', **font)
#data = np.array([146.46031189, 526.5378418, 719.746521, 877.02825928, 980.95404053, 1060.71240234, 1113.99511719, 1153.0637207, 1185.11499023, 1206.82714844, 1246.4675293, 1336.64575195, 1317.92614746, 1336.84313965, 1356.78967285])

#IMU 
"""
nan = np.nan

std_ = np.array([[ 4473.649475  ,  2260.13773728,  1508.43307339,            nan,  nan,            nan], 
		 [ 2233.12628156,  1624.42790285,  1410.31338369,            nan,  nan,            nan], 
                 [ 2405.86327794,  1968.09771855,  1800.76154462,            nan,  nan,            nan], 
	         [ 1353.04368535,  1548.05480915,  1463.47090005,            nan,  nan,            nan], 
                 [ 1603.19288082,  1213.44308434,  1077.79952766,            nan,  nan,            nan], 
		 [ 2147.32120078,  2346.137862  ,  1099.3448589 ,            nan,  nan,            nan],
		 [ 2892.56108303,  2340.28558798,  1862.20046238,            nan,  nan,            nan], 
		 [ 3760.98520707,  3604.96449733,  1958.34464009,            nan,  nan,            nan], 
		 [ 3749.74954314,  2519.27609367,  1783.44788852,            nan,  nan,            nan], 
                 [ 3469.83622001,  3820.45824856,  2415.05443804,            nan,   nan,            nan], 
                 [ 3623.92163148,  3105.05713672,  2694.88288089,            nan,   nan,            nan], 
		 [ 4759.35128995,  3914.98203142,  3442.12808576,            nan,   nan,            nan], 
		[ 3407.45994271,  2972.24017015,  2587.07929212,            nan,  nan,            nan], 
		[ 4054.40426447,  4890.28395834,  2759.24346552,            nan,  nan,            nan], 
		[ 2537.84998661,  3003.11072915,  2632.04769342,            nan, nan,            nan], 
		[ 3096.10493916,  5057.52735726,  2395.99845764,            nan,  nan,            nan], 
		[ 1824.00609526,  1851.18023378,  1892.48389751,            nan, nan,            nan], 
		[ 2776.67861164,  1740.4218848 ,  1980.60371417,            nan, nan,            nan],
		[ 1484.8226703 ,  3574.46276542,  1181.48584041,            nan,   nan,            nan], 
		[ 3040.95102249,  1763.31502111,  2276.79543911,            nan,       nan,            nan], 
		[ 1913.15722013,  1688.97715147,  2038.92227687,            nan,   nan,            nan], 
		[ 1677.47637195,  1034.13422261,   696.24329573,            nan,    nan,            nan], 
		[ 1074.17412623,   653.00402647,   998.91788345,            nan,    nan,            nan], 
		[ 580.53207221,  438.2647238 ,  324.57570444,           nan,                 nan,           nan]])


max_ = np.array([[ 213492.      ,  118290.25    ,   77503.515625,            nan,  nan,            nan], 
		 [ 48611.79296875,  44060.76171875,  40622.22265625,             nan,   nan,             nan], 
		[ 57801.50390625,  37459.86328125,  40741.19921875,             nan,      nan,             nan], 
                [ 31703.16601562,  30270.42578125,  40571.140625  ,             nan,   nan,             nan], 
		[ 44693.51953125,  29070.40429688,  23592.33007812,             nan,  nan,             nan], 
		[ 46486.01171875,  45430.37890625,  19380.64648438,             nan,   nan,             nan], 
		[ 56960.70703125,  42678.203125  ,  28772.01171875,             nan,   nan,             nan], 
		[ 64161.76953125,  48387.75390625,  23629.75390625,             nan, nan,             nan], 
		[ 42096.296875  ,  34904.1875    ,  15186.81933594,             nan,    nan,             nan], 
		[ 33042.69140625,  46423.60546875,  22853.95898438,             nan,    nan,             nan], 
		[ 42620.6015625 ,  40843.6640625 ,  39101.21484375,             nan,     nan,             nan], 
		[ 53010.72265625,  55676.72265625,  38456.86328125,             nan,     nan,             nan], 
		[ 34753.6640625 ,  45135.99609375,  35539.99609375,             nan,     nan,             nan], 
		[ 53433.62109375,  77914.453125  ,  35639.76953125,             nan,   nan,             nan], 
		[ 27399.59179688,  41914.125     ,  28908.11523438,             nan,      nan,             nan], 
		[ 35752.625     ,  93946.1171875 ,  30407.76953125,             nan,      nan,             nan], 
		[ 19159.5078125 ,  17789.88085938,  19123.42382812,             nan,  nan,             nan], 
		[ 44385.8984375 ,  15865.31835938,  25760.78710938,             nan,    nan,             nan], 
		[ 14612.62597656,  54403.0234375 ,   9269.27929688,             nan, nan,             nan], 
		[ 43384.54296875,  15598.2421875 ,  28528.33789062,             nan, nan,             nan], 
		[ 23969.01171875,  18863.65625   ,  25339.74804688,             nan, nan,             nan], 
		[ 27443.078125  ,  10524.49804688,   5994.49804688,             nan, nan,             nan],
		[  9059.74511719,   9244.64550781,  10818.70605469,             nan, nan,             nan], 
		[ 9468.99121094,  4615.70800781,  4487.04638672,            nan, nan,            nan]])

mean_ = np.array([[ 169.76890889,  108.50314935,   81.97836472,           nan,nan,           nan], 
		 [ 254.061215  ,  170.39261049,  143.25147546,           nan, nan,           nan], 
		 [ 241.79463021,  195.02486755,  178.54443434,           nan,nan,           nan], 
		[ 135.47027712,  183.40274964,  140.91428768,           nan,nan,           nan], 
		[ 159.97471951,  175.70767959,  140.21388908,           nan,nan,           nan],
		[ 291.38172172,  296.15830857,  190.58969169,           nan, nan,           nan], 
		[ 455.38696762,  401.27008331,  314.65092254,           nan,nan,           nan], 
		[ 664.80938525,  651.44396516,  410.33095661,           nan,nan,           nan], 
		[ 695.91076588,  531.73842669,  415.96675496,           nan, nan,           nan], 
		[ 783.22226786,  714.93676722,  561.84426526,           nan,nan,           nan], 
		[ 817.17773589,  735.20148156,  563.54070204,           nan, nan,           nan], 
		[ 989.58668859,  808.07192533,  698.21609606,           nan,nan,           nan],
		[ 661.96892138,  599.36937803,  519.18580047,           nan,nan,           nan],
		[ 786.10313576,  866.81192212,  593.70457137,           nan,nan,           nan],
		[ 533.60076782,  638.68446671,  566.99767967,           nan,nan,           nan], 
		[ 609.06417054,  662.7479063 ,  477.30276786,           nan,nan,           nan], 
		[ 430.74400006,  486.84450701,  458.53454701,           nan,nan,           nan], 
		[ 382.30739486,  366.27147755,  328.10785426,           nan,nan,           nan], 
		[ 361.5688022 ,  638.93140981,  324.1573551 ,           nan,nan,           nan], 
		[ 468.55305182,  394.43408449,  445.47847171,           nan,nan,           nan], 
		[ 311.03050096,  327.42180859,  365.09352135,           nan,nan,           nan], 
		[ 247.3601809 ,  258.05787851,  198.03975195,           nan,nan,           nan], 
		[ 191.89036506,  123.59620571,  176.15085903,           nan, nan,           nan], 
		[  71.18677905,  108.58009081,   76.22009082,           nan,nan,           nan]])

min_ = np.array([[  1.30323485e-07,   3.91666526e-06,   2.64557997e-07,   nan,              nan,              nan], 
		 [  8.07189645e-06,   3.84409987e-07,   7.39726644e-08, nan,              nan,              nan], 
		 [  2.73101790e-07,   1.28053989e-05,   1.72069612e-08, nan,              nan,              nan], 
		 [  1.79992844e-06,   1.59363044e-05,   9.75351089e-09, nan,              nan,              nan], 
		[  2.26668999e-06,   8.36588754e-07,   1.02195772e-05, nan,              nan,              nan], 
	 	[  2.08959636e-06,   8.29943190e-08,   6.47290144e-05, nan,              nan,              nan], 
		[  2.49890633e-07,   8.38748201e-06,   6.76540282e-08, nan,              nan,              nan], 
		[  5.79017524e-06,   1.08223976e-05,   2.71967622e-07, nan,              nan,              nan], 
		[  4.92715060e-07,   2.90759617e-05,   1.78821734e-04,nan,              nan,              nan], 
		[  2.00290184e-08,   1.96163410e-06,   2.56447788e-06, nan,              nan,              nan], 
		[  1.73993058e-07,   1.11931302e-04,   7.23041085e-05, nan,              nan,              nan], 
		[  2.75588955e-05,   5.20085177e-06,   1.43956577e-05, nan,              nan,              nan], 
		[  7.22508048e-06,   1.46213017e-04,   2.48975684e-05, nan,              nan,              nan], 
		[  4.80059607e-05,   2.15397886e-05,   8.36187755e-05, nan,              nan,              nan], 
		[  1.55282651e-05,   1.35999489e-05,   3.64694220e-04,nan,              nan,              nan], 
		[  1.73216933e-04,   2.39954330e-04,   2.10348026e-05, nan,              nan,              nan], 
		[  9.40141763e-06,   1.49605694e-04,   3.09450879e-05, nan,              nan,              nan], 
		[ 0.0001806 ,  0.00036083,  0.00025781,         nan,         nan,      nan], 
		[  1.02601969e-03,   4.89128943e-05,   1.61852862e-03, nan,              nan,              nan], 
		[  5.08926285e-04,   8.73582903e-05,   1.34117552e-04,  nan,              nan,              nan], 
		[  8.09341509e-06,   1.78421207e-04,   2.89414194e-04, nan,              nan,              nan], 
		[  3.07117996e-04,   3.54445206e-06,   1.46551011e-03, nan,              nan,              nan], 
		[  9.71956761e-05,   4.51265107e-04,   2.47261277e-03, nan,              nan,              nan], 
		[  7.06349150e-04,   5.28931196e-06,   9.64407518e-05, nan,              nan,              nan]])



for i in range(6):
    s = std_[:,i]
    m = mean_[:,i]
    _min = min_[:,i]
    _max = max_[:,i]
    plt.xlim(0.1, x[-1]+1)
    plt.figure() #TODO

    plt.errorbar(np.asarray(x), m, yerr=s, fmt='ok', lw=3)
    plt.errorbar(np.asarray(x), m, [m - _min, _max - m], fmt='.k', ecolor='gray', lw=1)

    plt.xlabel("Window Size")
    plt.ylabel("CUSUM Error")
    plt.legend()
    plt.title('IMU Frontal Collision CUSUM Error ' + str(i))
    plt.savefig('frontal_collision_imu_cusum_' + str(i) + '.png') # TODO
    plt.show()






"""
#'mic'
"""
std_ = np.array([ 259579.12597716, 8.79639113, 0.7848171, 0.41265177, 0.31530391, 0.22818869, 0.19654752, 0.15777821, 0.13066631, 0.1195463, 0.10214088, 0.09817499,  0.08865634, 0.08067622, 0.0714023, 0.07169713, 0.06236038, 0.06216053, 0.05667454, 0.05606836, 0.05223641, 0.05288104, 0.04871064, 0.04915128, 0.04508142])

max_ = np.array([30894246., 1136.85681152, 45.70444107, 16.27571487, 11.76156139, 10.64960003, 7.63068867, 7.64743614, 4.48500299, 5.22116232, 3.45615482,  3.4604001,  2.8518784, 2.58470488, 2.3034842, 2.7597127, 2.03492975, 2.03492975, 2.03492975, 2.03492975, 2.03492975, 2.03492975, 2.03492975, 2.03492975, 2.03492975])

mean_ = np.array([ 4149.2894345, 0.6642978, 0.22399235, 0.13524792, 0.09900024, 0.07565535, 0.06323346, 0.05254769, 0.04456466, 0.04005589, 0.03521267, 0.03253699,  0.02924196, 0.02741964, 0.02448944, 0.02333432, 0.02124708, 0.0202745, 0.01909525, 0.01833919, 0.01698221, 0.0168429, 0.01555131, 0.0154658, 0.01437858])

min_ = np.array([ 0., 0., 0., 0., 0.,  0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,  0., 0., 0., 0., 0., 0.,  0., 0., 0., 0.])
"""
#Lidar
"""
std_ = np.array([ 978063.69789669, 1666418.19240943, 1941061.5918685, 1714780.48616322, 1205874.90197715, 864320.29185997, 493691.14025057, 402249.75677798,  304461.5150184, 288777.52325985, 232188.31777216, 207253.16211237, 163059.2159116, 135522.91637456, 128844.55666524, 121273.3459633, 152535.9169908,  120115.32973066,  119780.46086795, 119832.21017811, 119723.99112506, 119714.52987471, 119642.99683959, 119638.3758472, 119629.51104469])

max_ = np.array([ 9972214., 9992756., 9994477., 9994012., 9989296., 9979861., 9404031., 7701811., 7877456., 9948771., 9114559., 9589298., 9589298., 9589298.,  9589298.,  9589298., 9589298., 9589298., 9589298., 9589298., 9589298., 9589298., 9589298., 9589298., 9589298.])

mean_ = np.array([ 204069.1954672, 544881.40891782, 838896.58424597, 724664.48169603, 431121.63828702, 236045.91837435, 112273.8581575, 74657.54613841,  49681.42711232,  32345.17389024, 21915.57081682, 15927.42342303, 10474.64789344, 6477.38016736, 5188.57604714, 3723.3666556, 4308.88916663, 2757.39684824,  2403.74166958, 2351.86771153, 2145.6520303, 2062.51249347, 1925.32003098, 1900.07586955, 1865.73877351])

min_ = np.array([ 0.,  0., 0.,  0., 0., 0., 0., 0., 0., 0., 0.,  0.,  0.,  0., 0., 0., 0., 0., 0., 0., 0.,  0.,  0., 0., 0.])
"""
#Camera

std_ = np.array([ 0.04359363, 0.33997322, 0.68946669, 0.97140498, 1.30942008, 1.58597112, 1.73053072, 1.98188521, 2.13442478, 2.40315838,  2.6565825, 2.73305979,  2.96678551, 3.07086063, 3.25305172, 3.32695113, 3.3622771, 3.36982574, 3.4924788, 3.54725005, 3.49194133, 3.64610101, 3.65565914, 3.85863613, 3.74354768])

max_ = np.array([ 1.85542488, 3.10875416, 6.69489622, 15.24551868, 23.99054718, 31.30227089, 37.60640335, 43.79122925, 48.18826675, 52.0890007, 57.08532715,  61.75623703, 66.14871216, 70.29675293, 69.80413055, 69.2869339, 72.44198608, 75.25346375, 77.8048172, 80.10329437, 82.15694427, 83.8718338, 85.56903076,  86.95131683,  88.13634491])

mean_ = np.array([  8.61590114e-05,  0.00033428,  0.00037421, 0.0003866, 0.00035044, 0.00037797, 0.00056691, 0.00047638, 0.0003454, 0.00034572, 0.00047712,  0.00037262,  0.00050803, 0.00029729, 0.00040936, 0.00054386,  0.00035401, 0.0006028, 0.00038018, 0.00038343, 0.0009238, 0.00055264, 0.00029887, 0.00103627,  0.00100625])

min_ = np.array([-1.52347791, -3.25339413, -5.81346416, -15.19486809, -21.10801506, -28.52082825, -34.4464798, -38.20159531, -43.72814941, -48.89269638, -50.47808456, -51.80220032, -56.07605362, -60.02840424, -60.6204071, -60.64129257, -62.86386108, -66.69682312, -69.31656647, -71.69043732, -73.82260132, -69.54953766, -77.3862915, -78.83521271, -73.825737])


plt.errorbar(np.asarray(x)*0.01, mean_.flatten(), yerr=std_.flatten(), fmt='ok', lw=3)
plt.errorbar(np.asarray(x)*0.01, mean_, [mean_ - min_, max_ - mean_], fmt='.k', ecolor='gray', lw=1)

plt.legend()
plt.title('Camera Frontal Collision CUSUM Error')
plt.xlabel("Marching Threshold")
plt.ylabel("CUSUM Error")

plt.savefig("frontal_collision_camera_cusum.png");
plt.show()

